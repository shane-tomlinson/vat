{"version":3,"sources":["../.tmp/vat.js"],"names":["f","exports","module","define","amd","g","window","global","self","VAT","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length","_","toValidationError","value","err","TypeError","_allowed","_renameTo","_transforms","_valid","_validators","_duplicate","arrayName","duplicate","Object","create","concat","allow","push","apply","arguments","clone","extend","src","optional","renameTo","name","required","_isRequired","strict","test","validator","transform","transformer","valid","validate","val","origValue","reduce","contains","isUndefined","error","ReferenceError","forEach","vat","utils","any","isBoolean","toRangeError","RangeError","number","max","limit","min","isNumber","parseInt","parseFloat","Infinity","string","len","RegExp","regExp","isString","trim","array","item","indexOf","target","sources","slice","source","key","prototype","toString","isFunction","union","arrays","data","schema","missingSchemaError","allKeys","keys","result","targetKey","register","unregister","reserved","types","typeName"],"mappings":"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","file":"vat.js","sourcesContent":["(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.VAT = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/*global require, module*/\n\n'use strict'; //jshint ignore:line\n\nconst _ = require('../utils');\n\nfunction toValidationError(value) {\n  let err = new TypeError('validation error');\n  err.value = value;\n  return err;\n}\n\nmodule.exports = {\n  _allowed: [],\n  _renameTo: null,\n  _transforms: [],\n  _valid: [],\n  _validators: [],\n\n  _duplicate(arrayName) {\n    let duplicate = Object.create(this);\n\n    // To help performance, take a copy-on-write approach\n    // to copying over arrays. Only copy the array that is specified\n    // as an input parameter.\n    if (arrayName) {\n      duplicate[arrayName] = [].concat(this[arrayName]);\n    }\n\n    return duplicate;\n  },\n\n  /**\n   * Explicitly allow a value, before any conversion.\n   * Accepts one or more arguments.\n   *\n   * @method allow\n   * @param {variant} vals\n   */\n  allow(/*...vals*/) {\n    let duplicate = this._duplicate('_allowed');\n    [].push.apply(duplicate._allowed, arguments);\n    return duplicate;\n  },\n\n  /**\n   * Create a clone of the current schema that can be extended.\n   *\n   * @method clone\n   */\n  clone() {\n    return this._duplicate();\n  },\n\n  /**\n   * Mix functions into the current schema.\n   * __MODIFIES THE CURRENT SCHEMA__\n   *\n   * @method extendCurrent\n   * @param {object} src - Object with additional functions.\n   */\n  extend(src) {\n    _.extend(this, src);\n    return this;\n  },\n\n  /**\n   * Mark the field as optional. All fields are optional by default.\n   *\n   * @method optional\n   */\n  optional() {\n    return this;\n  },\n\n  /**\n   * Export the result as `name` in the results. If `name` is specified,\n   * acts as a setter. If `name` is not specified, acts as a getter.\n   *\n   * @method renameTo\n   * @param {string} [name] - if not specified, acts as a getter.\n   * @returns {Schema} if acting as a setter, or\n   *          {string} export name, only returned if acting as a getter.\n   */\n  renameTo(name) {\n    if (arguments.length === 0) {\n      return this._renameTo;\n    }\n\n    // no need to pass in an array name, none are being updated.\n    let duplicate = this._duplicate();\n    duplicate._renameTo = name;\n    return duplicate;\n  },\n\n  /**\n   * Mark the field as required\n   *\n   * @method required\n   */\n  required() {\n    var duplicate = this._duplicate();\n    duplicate._isRequired = true;\n    return duplicate;\n  },\n\n  /**\n   * Remove current transforms\n   *\n   * @method strict\n   */\n  strict() {\n    // no need to pass in `_transforms` since it'll be overwritten anyways\n    let duplicate = this._duplicate();\n    duplicate._transforms = [];\n    return duplicate;\n  },\n\n  /**\n   * Add a validation test function. Function will\n   * be called with value being validated.\n   *\n   * @method test\n   * @param {function} validator\n   */\n  test(validator) {\n    let duplicate = this._duplicate('_validators');\n    duplicate._validators.push(validator);\n    return duplicate;\n  },\n\n  /**\n   * Add a transformer. A transformer is a function that accepts\n   * a value and returns another value. Validation will occur\n   * with the transformed value.\n   *\n   * @method transform\n   * @param {function} transformer\n   */\n  transform(transformer) {\n    let duplicate = this._duplicate('_transforms');\n    duplicate._transforms.push(transformer);\n    return duplicate;\n  },\n\n  /**\n   * Create an exclusive allowed list of values.\n   * Accepts one or more arguments.\n   *\n   * @method valid\n   * @param {variant} ...vals\n   */\n  valid(/*...vals*/) {\n    let duplicate = this._duplicate('_valid');\n    [].push.apply(duplicate._valid, arguments);\n    return duplicate;\n  },\n\n  /**\n   * Validate a value\n   *\n   * @method validate\n   * @param {variant} val\n   * @returns {object} result\n   * @returns {Error} [result.error] - Present if any validation errors occur.\n   * @returns {variant} result.value - The transformed value. Present if\n   * validation succeeds. Same as `val` if no transformation is made.\n   */\n  validate(val) {\n    let origValue = val;\n\n    // Perform any transformations.\n    val = this._transforms.reduce((val, transform) => {\n      return transform(val);\n    }, val);\n\n    // Check the exclusive allowed list first. If an exclusive allowed list\n    // is defined and the value is not a member of list, throw\n    // a validation error.\n    if (this._valid.length) {\n      if (_.contains(this._valid, val)) {\n        return { value: val };\n      } else if (! _.isUndefined(val)) {\n        return { error: toValidationError(origValue) };\n      }\n    }\n\n    // Check against the allowed list. If the value is not a member\n    // of the allowed list, continue.\n    if (_.contains(this._allowed, val)) {\n      return { value: val };\n    }\n\n    // If an undefined value and field is optional, no\n    // further validation is done.\n    if (_.isUndefined(val)) {\n      if (this._isRequired) {\n        return { error: new ReferenceError('missing value') };\n      } else {\n        // If an undefined value and field is optional, no\n        // further validation is done.\n        return { value: val };\n      }\n    }\n\n    // Finally, perform the validations.\n    try {\n      this._validators.forEach((validator) => {\n        if (! validator(val)) {\n          throw toValidationError(origValue);\n        }\n      });\n    } catch (e) {\n      return { error: e };\n    }\n\n    return { value: val };\n  }\n};\n\n},{\"../utils\":5}],2:[function(require,module,exports){\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/*global require, module*/\n\n'use strict'; //jshint ignore:line\n\nmodule.exports = (vat) => {\n  const _ = vat.utils;\n  return vat.any().transform((val) => {\n    if (val === 'true') {\n      return true;\n    } if (val === 'false') {\n      return false;\n    }\n\n    return val;\n  })\n  .test((val) => {\n    return _.isBoolean(val) || _.isUndefined(val);\n  });\n};\n\n\n},{}],3:[function(require,module,exports){\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/*global require, module*/\n\n'use strict'; //jshint ignore:line\n\nfunction toRangeError(value) {\n  let err = new RangeError('invalid value');\n  err.value = value;\n  return err;\n}\n\nconst number = {\n  /**\n   * Specifies the maximum acceptable value\n   *\n   * @method max\n   * @param {number} limit\n   */\n  max(limit) {\n    return this.test((val) => {\n      if (val > limit) {\n        throw toRangeError(val);\n      }\n      return true;\n    });\n  },\n\n  /**\n   * Specifies the minimum acceptable value\n   *\n   * @method min\n   * @param {number} limit\n   */\n  min(limit) {\n    return this.test((val) => {\n      if (val < limit) {\n        throw toRangeError(val);\n      }\n      return true;\n    });\n  }\n};\n\n\nmodule.exports = (vat) => {\n  const _ = vat.utils;\n  return vat.any().clone().extend(number).transform((val) => {\n    if (! _.isNumber(val)) {\n      if (/^[+-]?\\d+$/.test(val)) {\n        return parseInt(val, 10);\n      } else if (/^[+-]?\\d*\\.\\d*$/.test(val)) {\n        return parseFloat(val);\n      } else if (/^[+-]?Infinity$/.test(val)) {\n        if (val[0] === '-') {\n          return -Infinity;\n        }\n\n        return Infinity;\n      }\n    }\n\n    return val;\n  })\n  .test((val) => {\n    return _.isNumber(val) || _.isUndefined(val);\n  });\n};\n\n},{}],4:[function(require,module,exports){\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/*global require, module*/\n\n'use strict'; //jshint ignore:line\n\nmodule.exports = (vat) => {\n\n  const string = {\n    /**\n     * Specifies the exact string length required\n     *\n     * @method len\n     * @param {number} limit\n     */\n    len(limit) {\n      return this.test((val) => {\n        return val.length === limit;\n      });\n    },\n\n    /**\n     * Specifies the maximum number of characters allowed (inclusive)\n     *\n     * @method max\n     * @param {number} limit\n     */\n    max(limit) {\n      return this.test((val) => {\n        return val.length <= limit;\n      });\n    },\n\n    /**\n     * Specifies the minimum number of characters allowed (inclusive)\n     *\n     * @method min\n     * @param {number} limit\n     */\n    min(limit) {\n      return this.test((val) => {\n        return val.length >= limit;\n      });\n    },\n\n    /**\n     * Override test to accept regular expressions\n     *\n     * @method test\n     * @param {function|regexp} validator\n     */\n    test(validator) {\n      if (validator instanceof RegExp) {\n        const regExp = validator;\n        validator = (val) => {\n          return regExp.test(val);\n        };\n      }\n      return vat.any().test.call(this, validator);\n    }\n  };\n\n  const _ = vat.utils;\n  return vat.any().clone().extend(string).transform((val) => {\n    // trim strings by default\n    if (_.isString(val)) {\n      return val.trim();\n    }\n\n    return val;\n  }).test((val) => {\n    return _.isString(val) || _.isUndefined(val);\n  });\n};\n\n},{}],5:[function(require,module,exports){\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/*global module */\n\n'use strict'; //jshint ignore:line\n\nmodule.exports = {\n  contains(array, item) {\n    return array.indexOf(item) !== -1;\n  },\n\n  extend(target/*, ...src*/) {\n    const sources = [].slice.call(arguments, 1);\n    sources.forEach((source) => {\n      for (let key in source) {\n        target[key] = source[key];\n      }\n    });\n    return target;\n  },\n\n  isBoolean(val) {\n    return Object.prototype.toString.call(val) === '[object Boolean]';\n  },\n\n  isFunction(val) {\n    return typeof val === 'function';\n  },\n\n  isNumber(val) {\n    return Object.prototype.toString.call(val) === '[object Number]';\n  },\n\n  isString(val) {\n    return Object.prototype.toString.call(val) === '[object String]';\n  },\n\n  isUndefined(val) {\n    return typeof val === 'undefined';\n  },\n\n  union(/*...arrays*/) {\n    let arrays = [].slice.call(arguments, 0);\n\n    let union = [];\n    arrays.forEach((array) => {\n      array.forEach((item) => {\n        if (! module.exports.contains(union, item)) {\n          union.push(item);\n        }\n      });\n    });\n\n    return union;\n  }\n};\n\n},{}],6:[function(require,module,exports){\n/* This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/. */\n\n/*global require, module*/\n\n'use strict'; //jshint ignore:line\n\nconst _ = require('./utils');\n\n/**\n * Validate data against a schema\n *\n * @param {variant} data - data to validate\n * @param {Schema} schema - schema to use to validate\n * @returns {object} result\n *   @returns {Error} result.error - any error thrown\n *   @returns {variant} result.value - transformed data\n */\nfunction validate(data, schema) {\n  let error = null;\n  let value = data;\n\n  try {\n    if (_.isUndefined(schema)) {\n      let missingSchemaError = new ReferenceError('missing schema');\n      missingSchemaError.value = data;\n      throw missingSchemaError;\n    }\n\n    if (_.isFunction(schema.validate)) {\n      return schema.validate(data);\n    } else {\n      // union ensures all data fields have a corresponding schema\n      // and all schemas are validated against.\n      let allKeys = _.union(Object.keys(data), Object.keys(schema));\n      value = {};\n      allKeys.forEach(function (key) {\n        let result = validate(data[key], schema[key]);\n\n        if (result.error) {\n          result.error.key = key;\n          throw result.error;\n        }\n\n        let targetKey = schema[key].renameTo() || key;\n        // only add undefined values iff the value is required\n        if (! _.isUndefined(result.value) || schema[key]._isRequired) {\n          value[targetKey] = result.value;\n        }\n      });\n    }\n  } catch (e) {\n    error = e;\n  }\n\n  return {\n    error,\n    value\n  };\n}\n\n\nmodule.exports = {\n  register,\n  unregister,\n  utils: _,\n  validate\n};\n\nlet reserved = Object.keys(module.exports);\nlet types = {};\n\n/**\n * Register a type to be validated against a schema\n *\n * @param {string} typeName - name of type\n * @param {Schema} schema - schema used to validate\n */\nfunction register(typeName, schema) {\n  if (_.contains(reserved, typeName)) {\n    throw new Error(`'${typeName}' is reserved`);\n  }\n\n  if (types[typeName]) {\n    throw new Error(`'${typeName}' is already registered`);\n  }\n\n  module.exports[typeName] = types[typeName] = () => {\n    return schema;\n  };\n}\n\n/**\n * Unregister a type\n *\n * @param {string} typeName - name of type\n */\nfunction unregister(typeName) {\n  if (_.contains(reserved, typeName)) {\n    throw new Error(`'${typeName}' is reserved`);\n  }\n\n  if (! types[typeName]) {\n    throw new Error(`'${typeName}' is already not registered`);\n  }\n\n  delete module.exports[typeName];\n  delete types[typeName];\n}\n\nregister('any', require('./types/any'));\nregister('boolean', require('./types/boolean')(module.exports));\nregister('number', require('./types/number')(module.exports));\nregister('string', require('./types/string')(module.exports));\n\n},{\"./types/any\":1,\"./types/boolean\":2,\"./types/number\":3,\"./types/string\":4,\"./utils\":5}]},{},[6])(6)\n});"]}